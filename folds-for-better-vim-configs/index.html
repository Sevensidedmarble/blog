<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Fold your vim config - Marble Zone</title><meta name="gridsome:hash" content="920fe901aef48dd146b7d33a7cf2fb0d4f58cffd"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Developer blog for sevensidedmarble, full stack developer, game dev, musician, and more."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon-32.ce0531f.f7934c85e7ae1b1ced7fa9d462d3a8a7.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon-32.ac8d93a.f7934c85e7ae1b1ced7fa9d462d3a8a7.png"><link rel="preload" href="/assets/css/0.styles.4d1c1582.css" as="style"><link rel="preload" href="/assets/js/app.35160816.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.308268ab.js" as="script"><link rel="preload" href="/assets/js/vue-remark--static--posts--folds-for-better-vim-configs-md.422983c7.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.2ae8ebb3.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.82027274.js"><link rel="prefetch" href="/assets/js/page--src--pages--resume-vue.b62e7201.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--compiling-godot-md.a038372f.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--figure-and-figcaption-md.266cdc6c.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--first-arch-wiki-contribution-md.03de98d7.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--flutter-development-without-android-studio-md.7bf14872.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--i-love-copyq-md.8fd1cae4.js"><link rel="prefetch" href="/assets/js/vue-remark--static--posts--minimal-rails-api-md.51ac2f68.js"><link rel="stylesheet" href="/assets/css/0.styles.4d1c1582.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><div class="top"><header><h1><a href="/">Marble Zone</a></h1><h2>sevensidedmarble's blog</h2></header><nav class="nav"><a href="/" class="active">Blog</a><a href="/resume">Resume</a><a href="https://github.com/sevensidedmarble" target="_blank" rel="noopener">GitHub</a></nav></div><main class="main"><article><h1>Fold your vim config</h1><div class="subheading">
      written by
      <a href="/resume">sevensidedmarble</a>
      on 2. April 2020
    </div><div><p>You may or may not know that I am pretty into Emacs and Org mode. Org mode, if you haven't seen it, it's an outliner built into Emacs:</p><figure data-v-1743c8ca><header data-v-1743c8ca></header><img alt="Org mode is great for writing structured content like scripts." data-zoomable="" src="/images/org-mode.png" class="g-image" data-v-1743c8ca data-v-1743c8ca><figcaption data-v-1743c8ca>
    Org mode is great for writing structured content like scripts.
  </figcaption></figure><p>Some people even use Org mode as a <a href="https://wiki.c2.com/?LiterateProgramming" target="_blank" rel="nofollow noopener noreferrer">literate programming</a><sup><a href="#note-1">1</a></sup> tool for their Emacs config. I've always thought this was pretty cool, and thought literate programming in general was pretty cool, but never found a great way to apply it to my vim config until now.</p><aside id="note-1" class="note"><header>Sidenote 1</header>
Literate Programming was also conceived by the famous Donald Knuth, which is interesting.
</aside><h3 id="the-inspiration"><a href="#the-inspiration" aria-hidden="true"><span class="icon icon-link"></span></a>The inspiration</h3><p>Before continuing I'd like to lead with where I found this idea online:</p><ul><li><a href="https://vi.stackexchange.com/questions/3814/is-there-a-best-practice-to-fold-a-vimrc-file" target="_blank" rel="nofollow noopener noreferrer">https://vi.stackexchange.com/questions/3814/is-there-a-best-practice-to-fold-a-vimrc-file</a></li><li><a href="https://jdhao.github.io/2019/08/16/nvim_config_folding/" target="_blank" rel="nofollow noopener noreferrer">https://jdhao.github.io/2019/08/16/nvim_config_folding/</a></li></ul><p>I'm not sure which of these I saw first, but the basic concept is using manually placed fold markers in your vim config to break it down into sections. Kind of like this:</p><figure data-v-1743c8ca><header data-v-1743c8ca>Before...</header><img alt="Please forgive my messy config." data-zoomable="" src="/images/before-folding.png" class="g-image" data-v-1743c8ca data-v-1743c8ca><figcaption data-v-1743c8ca>
    Please forgive my messy config.
  </figcaption></figure><figure data-v-1743c8ca><header data-v-1743c8ca>After!</header><img alt="This is what it looks like with one of the folded sections opened." data-zoomable="" src="/images/after-folding.png" class="g-image" data-v-1743c8ca data-v-1743c8ca><figcaption data-v-1743c8ca>
    This is what it looks like with one of the folded sections opened.
  </figcaption></figure><p>Some people even take this a step farther and apply some crazy fold styling to make it look even more like Org mode, which you can see in one of the links above.</p><h3 id="heres-what-you-need"><a href="#heres-what-you-need" aria-hidden="true"><span class="icon icon-link"></span></a>Here's what you need</h3><p><code>fold-marker</code> is a folding method few people I'd imagine spend much time thinking about. The markers themselves look like this:</p><pre><code>&quot;&quot; Autocomplete {{{
Plug 'Shougo/neco-vim'
Plug 'neoclide/coc-neco'
Plug 'neoclide/coc-sources'
Plug 'neoclide/coc.nvim', {'branch': 'release'}
&quot;&quot; }}}

&quot;&quot; The almighty tpope {{{
Plug 'tpope/vim-sensible'
Plug 'tpope/vim-endwise'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-eunuch'
Plug 'tpope/vim-rhubarb'
Plug 'tpope/vim-rsi'
Plug 'tpope/vim-unimpaired'
&quot; }}}

&quot;&quot; Spellcheck {{{
autocmd BufRead,BufNewFile *.md setlocal spell spelllang=en_us
autocmd FileType gitcommit setlocal spell spelllang=en_us
&quot;&quot; }}}
</code></pre><p>Which when folded look something like this:</p><pre><code>+--  7 lines: &quot; Autocomplete

+-- 18 lines: &quot; The almighty tpope

+--  5 lines: &quot; Spellcheck
</code></pre><p>I've found this is an amazing way of breaking up your vim config into sections without relying on splitting it into different files (which I was doing before, and wasn't ever completely satisfied with).</p><h3 id="but-wait-theres-more"><a href="#but-wait-theres-more" aria-hidden="true"><span class="icon icon-link"></span></a>But wait, there's more</h3><p>There's only one problem though, you probably don't want to set <code>foldmethod</code> to <code>fold-marker</code> for everything. I personally think <code>syntax</code> or <code>indent</code> is the most useful general-purpose <code>foldmethod</code>, so that is what I set mine to in my vim config. So how you change <code>foldmethod</code> only for <code>.vim</code> files?</p><p>Well, there is of course a few ways to do it, but the best is to use <code>ftplugin</code>.</p><p>In your vim config directories <code>after/ftplugin</code> directory (I use neovim, so for me this is at <code>~/.config/nvim/after/ftplugin/vim/vim.vim</code>) add the following file to the following directory:</p><pre><code>&quot;&quot; ~/.config/nvim/after/ftplugin/vim/vim.vim
set foldmethod=marker
</code></pre><h3 id="breaking-this-down"><a href="#breaking-this-down" aria-hidden="true"><span class="icon icon-link"></span></a>Breaking this down</h3><ol><li>The <code>after</code> directory is where <code>ftplugin</code> files can run <em>after</em> vim default configurations have loaded.</li><li>The <code>ftplugin</code> directory then contains a bunch of subdirectories for each file type.</li><li>Then the <code>vim</code> directory contains files that will run only when editing <code>.vim</code> files, after other config files have fully loaded.</li><li>Then the file itself is just setting foldmethod to marker. Settings put here are filetype specific, so they won't bleed into other filetypes.</li></ol><p>Well, that's about it. I hope you find this somewhat as cool as I do!</p></div></article></main><div class="footer"><p class="footer-centered"><a href="https://github.com/sevensidedmarble" target="_blank" rel="noopener">Check out my GitHub!</a></p></div></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Fold your vim config","content":"\nimport FigImage from '~\u002Fcomponents\u002FFigImage.vue'\n\nYou may or may not know that I am pretty into Emacs and Org mode. Org mode, if you haven't seen it, it's an outliner built into Emacs:\n\n\u003CFigImage src=\"\u002Fimages\u002Forg-mode.png\" caption=\"Org mode is great for writing structured content like scripts.\" \u002F\u003E\n\nSome people even use Org mode as a [literate programming](https:\u002F\u002Fwiki.c2.com\u002F?LiterateProgramming)\u003Csup\u003E\u003Ca href=\"#note-1\"\u003E1\u003C\u002Fa\u003E\u003C\u002Fsup\u003E tool for their Emacs config. I've always thought this was pretty cool, and thought literate programming in general was pretty cool, but never found a great way to apply it to my vim config until now.\n\n\u003Caside id=\"note-1\" class=\"note\"\u003E\n\u003Cheader\u003ESidenote 1\u003C\u002Fheader\u003E\nLiterate Programming was also conceived by the famous Donald Knuth, which is interesting.\n\u003C\u002Faside\u003E\n\n### The inspiration\n\nBefore continuing I'd like to lead with where I found this idea online:\n- https:\u002F\u002Fvi.stackexchange.com\u002Fquestions\u002F3814\u002Fis-there-a-best-practice-to-fold-a-vimrc-file\n- https:\u002F\u002Fjdhao.github.io\u002F2019\u002F08\u002F16\u002Fnvim_config_folding\u002F\n\nI'm not sure which of these I saw first, but the basic concept is using manually placed fold markers in your vim config to break it down into sections. Kind of like this:\n\n\u003CFigImage src=\"\u002Fimages\u002Fbefore-folding.png\" header=\"Before...\" caption=\"Please forgive my messy config.\" \u002F\u003E\n\n\u003CFigImage src=\"\u002Fimages\u002Fafter-folding.png\" header=\"After!\" caption=\"This is what it looks like with one of the folded sections opened.\" \u002F\u003E\n\nSome people even take this a step farther and apply some crazy fold styling to make it look even more like Org mode, which you can see in one of the links above.\n\n### Here's what you need\n\n`fold-marker` is a folding method few people I'd imagine spend much time thinking about. The markers themselves look like this:\n\n\u003C!-- {% raw %} --\u003E\n```\n\"\" Autocomplete {{{\nPlug 'Shougo\u002Fneco-vim'\nPlug 'neoclide\u002Fcoc-neco'\nPlug 'neoclide\u002Fcoc-sources'\nPlug 'neoclide\u002Fcoc.nvim', {'branch': 'release'}\n\"\" }}}\n\n\"\" The almighty tpope {{{\nPlug 'tpope\u002Fvim-sensible'\nPlug 'tpope\u002Fvim-endwise'\nPlug 'tpope\u002Fvim-repeat'\nPlug 'tpope\u002Fvim-eunuch'\nPlug 'tpope\u002Fvim-rhubarb'\nPlug 'tpope\u002Fvim-rsi'\nPlug 'tpope\u002Fvim-unimpaired'\n\" }}}\n\n\"\" Spellcheck {{{\nautocmd BufRead,BufNewFile *.md setlocal spell spelllang=en_us\nautocmd FileType gitcommit setlocal spell spelllang=en_us\n\"\" }}}\n```\n\u003C!-- {% endraw %} --\u003E\n\nWhich when folded look something like this:\n\n```\n+--  7 lines: \" Autocomplete\n\n+-- 18 lines: \" The almighty tpope\n\n+--  5 lines: \" Spellcheck\n```\n\nI've found this is an amazing way of breaking up your vim config into sections without relying on splitting it into different files (which I was doing before, and wasn't ever completely satisfied with).\n\n### But wait, there's more\n\nThere's only one problem though, you probably don't want to set `foldmethod` to `fold-marker` for everything. I personally think `syntax` or `indent` is the most useful general-purpose `foldmethod`, so that is what I set mine to in my vim config. So how you change `foldmethod` only for `.vim` files?\n\nWell, there is of course a few ways to do it, but the best is to use `ftplugin`.\n\nIn your vim config directories `after\u002Fftplugin` directory (I use neovim, so for me this is at `~\u002F.config\u002Fnvim\u002Fafter\u002Fftplugin\u002Fvim\u002Fvim.vim`) add the following file to the following directory:\n\n```\n\"\" ~\u002F.config\u002Fnvim\u002Fafter\u002Fftplugin\u002Fvim\u002Fvim.vim\nset foldmethod=marker\n```\n\n### Breaking this down\n\n1. The `after` directory is where `ftplugin` files can run *after* vim default configurations have loaded.\n2. The `ftplugin` directory then contains a bunch of subdirectories for each file type.\n3. Then the `vim` directory contains files that will run only when editing `.vim` files, after other config files have fully loaded.\n4. Then the file itself is just setting foldmethod to marker. Settings put here are filetype specific, so they won't bleed into other filetypes.\n\nWell, that's about it. I hope you find this somewhat as cool as I do!\n","author":"sevensidedmarble","published":true,"date":"2. April 2020","description":"How to use fold markers to organize your vim config.","keywords":"vim, neovim"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.35160816.js" defer></script><script src="/assets/js/page--src--templates--post-vue.308268ab.js" defer></script><script src="/assets/js/vue-remark--static--posts--folds-for-better-vim-configs-md.422983c7.js" defer></script>
  </body>
</html>
